(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/task/index"],{1459:function(e,t,r){"use strict";r.r(t);var n=r("d08c"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},"28e1":function(e,t,r){},6533:function(e,t,r){"use strict";(function(e){r("88c8");n(r("66fd"));var t=n(r("a83f"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"9dd2":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n}));var n={uTabs:function(){return Promise.all([r.e("common/vendor"),r.e("uview-ui/components/u-tabs/u-tabs")]).then(r.bind(null,"7f9c"))}},a=function(){var e=this,t=e.$createElement;e._self._c},o=[]},a83f:function(e,t,r){"use strict";r.r(t);var n=r("9dd2"),a=r("1459");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);r("a87b");var s,i=r("f0c5"),l=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,"06feac7b",null,!1,n["a"],s);t["default"]=l.exports},a87b:function(e,t,r){"use strict";var n=r("28e1"),a=r.n(n);a.a},d08c:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("2f62");function o(e){return c(e)||l(e)||i(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return u(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(){r.e("components/sample/sample-term").then(function(){return resolve(r("a068"))}.bind(null,r)).catch(r.oe)},h=function(){Promise.all([r.e("common/vendor"),r.e("components/sample/approve-term")]).then(function(){return resolve(r("e7b1"))}.bind(null,r)).catch(r.oe)},g=function(){r.e("components/sample/group-leader-term").then(function(){return resolve(r("e058"))}.bind(null,r)).catch(r.oe)},b=(n={components:{sampleTerm:f,approveTerm:h,groupLeaderTerm:g},data:function(){return{pageNumber:1,leaderTaskList:[],sampleDatas:[],sampleAppData:[],sampleData:{sampleNo:"RNJSB21120304A001",position:"胡同山路西侧300m--",type:"环境空气",factor:"苯系物",operater:"慕容复",date:"2022-03-04 10:25:25",confirmedBy:"王宝强",reviewedBy:"的发生"},tabItem:[{name:"待提交"},{name:"待复核"},{name:"已驳回"}],tabIndex:0,loadingType:"more",showNoData:!1}},computed:m(m({},(0,a.mapGetters)(["tabBarList","userType"])),{},{isSampler:function(){return 2==this.userType}}),onPullDownRefresh:function(){this.pageNumber=1,this.leaderTaskList=[],this.sampleAppData=[],this.sampleDatas=[],this.isSampler?this.changeIndex(this.tabIndex):this.getTeamLeaderTaskList()},onReachBottom:function(){"nomore"!==this.loadingType&&(this.pageNumber++,this.isSampler?this.changeIndex(this.tabIndex):this.getTeamLeaderTaskList("onBottom"))}},d(n,"onPullDownRefresh",(function(){"nomore"!==this.loadingType&&(this.pageNumber=1,this.leaderTaskList=[],this.isSampler?this.changeIndex(this.tabIndex):this.getTeamLeaderTaskList())})),d(n,"onShow",(function(){this.pageNumber=1,this.tabBarList.length>0?this.getShowData():this.getCurrentUserInfo()})),d(n,"methods",{getShowData:function(){this.showNoData=!1,this.isSampler?this.changeIndex(this.tabIndex):this.getTeamLeaderTaskList()},tabClick:function(e){this.tabIndex=e,console.log("当前切换下标是".concat(this.tabIndex))},changeIndex:function(e){this.tabIndex=e,1!=e?this.getSamplerTaskList():this.getSampleTasksForCollectUser()},getTeamLeaderTaskList:function(t){var r=this;"refresh"===t&&e.stopPullDownRefresh(),"onBottom"!==t&&(this.leaderTaskList=[],this.loadingType="nomore");var n={pageNumber:this.pageNumber,pageSize:8,order:"",sort:""};this.$api.getTeamLeaderTaskList(n,(function(e){e.success&&e.result.records.length>0&&(r.loadingType=8===e.result.records.length?"more":"nomore",r.leaderTaskList=[].concat(o(r.leaderTaskList),o(e.result.records))),r.leaderTaskList&&0!=r.leaderTaskList.length||(r.loadingType="nomore")}))},getSamplerTaskList:function(t){var r=this;"refresh"===t&&e.stopPullDownRefresh(),"onBottom"!==t&&(this.sampleDatas=[],this.loadingType="nomore");var n={sampleStatus:0==this.tabIndex?0:1,pageNumber:this.pageNumber,pageSize:8};this.$api.getSamplerTaskList(n,(function(e){200===e.code&&e.result.records.length>0&&(r.loadingType=8===e.result.records.length?"more":"nomore",r.sampleDatas=[].concat(o(r.sampleDatas),o(e.result.records))),r.sampleDatas&&0!=r.sampleDatas.length||(r.loadingType="nomore")}))},getSampleTasksForCollectUser:function(t){var r=this;"refresh"===t&&e.stopPullDownRefresh(),"onBottom"!==t&&(this.sampleAppData=[],this.loadingType="nomore");var n={pageNumber:this.pageNumber,pageSize:8};this.$api.getSampleTasksForCollectUser(n,(function(e){200===e.code&&e.result.records.length>0&&(r.loadingType=8===e.result.records.length?"more":"nomore",r.sampleAppData=[].concat(o(r.sampleAppData),o(e.result.records))),r.sampleAppData&&0!=r.sampleAppData.length||(r.loadingType="nomore")}))},getCurrentUserInfo:function(){var e=this;this.$api.getUserInfo((function(t){if(t.success&&t.result){if(e.$store.commit("SAVE_CUR_USER",t.result),t.result.appRoles.length>0)switch(e.$store.commit("SAVE_ROLE_LISTS",t.result.appRoles),t.result.appRoles[0]){case"2":e.$store.commit("SAVE_CUR_ROLE",{roleId:2,roleName:"采样员"});break;case"1":e.$store.commit("SAVE_CUR_ROLE",{roleId:1,roleName:"采样组长"});break;default:e.$store.commit("SAVE_CUR_ROLE",{})}else e.$store.commit("SAVE_ROLE_LISTS",t.result.appRoles);e.getShowData()}else e.$common.errorToShow(t.result)}))}}),n);t.default=b}).call(this,r("543d")["default"])}},[["6533","common/runtime","common/vendor"]]]);